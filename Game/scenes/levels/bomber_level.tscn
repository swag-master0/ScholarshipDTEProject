[gd_scene load_steps=10 format=3 uid="uid://w2l3dpbjub7c"]

[ext_resource type="PackedScene" uid="uid://bs5hdiefi57co" path="res://blend/level4.blend" id="1_mp2pk"]
[ext_resource type="PackedScene" uid="uid://c7ycb57houxl1" path="res://scenes/elements/player.tscn" id="2_wpjg1"]
[ext_resource type="PackedScene" uid="uid://b5c4qe603h5o" path="res://scenes/elements/assets/explosive_barrel.tscn" id="3_hbe0q"]
[ext_resource type="PackedScene" uid="uid://yr8bnk105o8v" path="res://scenes/elements/assets/explosive_barrel_pile.tscn" id="4_eyiea"]
[ext_resource type="PackedScene" uid="uid://dwe6hqxcxga2x" path="res://scenes/elements/enemies/bomber.tscn" id="5_clcqa"]
[ext_resource type="PackedScene" uid="uid://d4nob737a2chy" path="res://scenes/elements/assets/objective.tscn" id="6_pj5qa"]

[sub_resource type="GDScript" id="GDScript_ur7ug"]
resource_name = "bomberlevel_functionality"
script/source = "extends Node3D

@onready var spawnarea = $SpawnLocations
@export var barrel : PackedScene
@export var chance_for_spawn : float = 50


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass

func _on_timer_timeout():
	if ready:
		var list = []
		
		for i in spawnarea.get_children():
			var rand = randi_range(0, 100)
			
			if rand > chance_for_spawn:
				list.append(i)
			
		
		for i in list:
			
			var created_barrel = barrel.instantiate()
			self.get_parent().add_child(created_barrel)
			created_barrel.global_position = i.global_position
		
			created_barrel.affect_player_only = true
"

[sub_resource type="NavigationMesh" id="NavigationMesh_pq4er"]
vertices = PackedVector3Array(40.25, 0.5, -33.25, 38.75, 0.5, -33.25, 39, 0.5, -30.5, 40.75, 0.5, -33.75, 40.25, 0.5, -33.25, 39, 0.5, -30.5, 69.5, 0.5, -30.5, 69.5, 0.5, -70.25, 71.5, 0.5, -70.5, 71.5, 0.5, -74.25, 69.5, 0.5, -74.5, 69.5, 0.5, -70.25, 40.75, 0.5, -79.25, 40.75, 0.5, -33.75, 69.5, 0.5, -30.5, 69.5, 0.5, -70.25, 69.5, 0.5, -74.5, 40.75, 0.5, -79.25, 69.5, 0.5, -74.5, 69.5, 0.5, -79.25, 40.75, 0.5, -79.25, 89, 0.5, -70.5, 89.25, 0.5, -74.25, 71.5, 0.5, -74.25, 71.5, 0.5, -70.5, 89.25, 0.5, -74.25, 89, 0.5, -70.5, 90.5, 0.5, -70.5, 90.5, 0.5, -70.5, 90.75, 0.5, -68.75, 94.5, 0.5, -69, 90.5, 0.5, -70.5, 94.5, 0.5, -69, 94.5, 0.5, -74.25, 89.25, 0.5, -74.25, 90.75, 0.5, -68.75, 90.75, 2.75, -61.5, 94.5, 0.5, -61.25, 94.5, 0.5, -69, 92.51, 0.5, -65.014, 94.5, 0.5, -61.25, 90.75, 2.75, -61.5, 90.75, 3, -59.75, 94.5, 0.75, -59.5, 90.25, 3.25, -59.25, 81.75, 9, -59.25, 81.75, 9, -40.5, 96, 0, -40.5, 92.5058, 1.75, -42.4779, 94.5, 0.75, -59.5, 90.75, 3, -59.75, 90.25, 3.25, -59.25, 96, 0, -40.5, 96.25, -0.25, -59.25, 159, -38.75, -40.5, 159.25, -39, -59.25, 96.25, -0.25, -59.25, 96, 0, -40.5, 140.485, -27.75, -44.0071, 101.51, -3.75, -42.4923, 160.75, -39.5, -40.25, 160.75, -39.5, -38.5, 174.5, -39.5, -38.5, 159, -38.75, -40.5, 160.75, -39.5, -40.25, 174.5, -39.5, -38.5, 174.75, -39.5, -59.25, 159.25, -39, -59.25, 160.001, -39.5, -42.4812, 161.475, -39.5, -57.525, 175.75, -51.5, -59.25, 175.75, -51.5, -40.5, 193.5, -51.5, -40.5, 193.5, -51.5, -59.25, 174.5, -39.5, -38.5, 160.75, -39.5, -38.5, 160.75, -39.5, -26.5, 174.5, -39.5, -26.5, 34.5, 0.5, -30.25, 39, 0.5, -30.5, 38.75, 0.5, -33.25, 30.75, 0.5, -33.25, 30.5, 0.5, -14.5, 34.5, 0.5, -14.25, 34.5, 0.5, -30.25, 30.75, 0.5, -33.25, -9.75, 0.5, 10.75, -11.25, 0.5, 10.75, -11, 0.5, 14.5, 9.5, 0.5, -10.25, 11.5, 0.5, -10.5, 11.5, 0.5, -14.25, 9.5, 0.5, -14.5, 9.5, 0.5, -10.25, 9.5, 0.5, -14.5, -9.25, 0.5, -19.25, -9.25, 0.5, 10.25, -9.75, 0.5, 10.75, -11, 0.5, 14.5, 9.5, 0.5, 14.5, 9.5, 0.5, -10.25, -9.25, 0.5, -19.25, -9.25, 0.5, 10.25, 9.5, 0.5, 14.5, 9.5, 0.5, -14.5, 9.5, 0.5, -19.25, -9.25, 0.5, -19.25, 34.5, 0.5, -10.5, 34.5, 0.5, -14.25, 30.5, 0.5, -14.5, 11.5, 0.5, -14.25, 11.5, 0.5, -10.5, -29.75, 0.5, 25.75, -31.75, 0.5, 25.75, -31.75, 0.5, 29.25, -20.5, 0.5, 14.75, -18.75, 0.5, 14.5, -19, 0.5, 10.75, -29.25, 0.5, 10.75, -29.25, 0.5, 25.25, -29.75, 0.5, 25.75, -31.75, 0.5, 29.25, -20.5, 0.5, 29.25, -20.5, 0.5, 14.75, -29.25, 0.5, 10.75, -29.25, 0.5, 25.25, -20.5, 0.5, 29.25, -18.75, 0.5, 14.5, -11, 0.5, 14.5, -11.25, 0.5, 10.75, -19, 0.5, 10.75, -31.75, 0.5, 29.25, -31.75, 0.5, 25.75, -49.25, 0.5, 25.75, -49.25, 0.5, 29.25)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(4, 3, 5), PackedInt32Array(5, 3, 6), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 10), PackedInt32Array(14, 13, 11), PackedInt32Array(11, 13, 12), PackedInt32Array(17, 16, 15), PackedInt32Array(20, 19, 18), PackedInt32Array(24, 23, 21), PackedInt32Array(21, 23, 22), PackedInt32Array(27, 26, 25), PackedInt32Array(30, 29, 28), PackedInt32Array(34, 33, 31), PackedInt32Array(31, 33, 32), PackedInt32Array(37, 39, 38), PackedInt32Array(38, 39, 35), PackedInt32Array(35, 39, 36), PackedInt32Array(36, 39, 37), PackedInt32Array(43, 42, 40), PackedInt32Array(40, 42, 41), PackedInt32Array(46, 48, 47), PackedInt32Array(47, 48, 44), PackedInt32Array(44, 48, 45), PackedInt32Array(45, 48, 46), PackedInt32Array(50, 49, 51), PackedInt32Array(51, 49, 53), PackedInt32Array(51, 53, 52), PackedInt32Array(56, 59, 57), PackedInt32Array(57, 58, 54), PackedInt32Array(54, 58, 55), PackedInt32Array(55, 58, 56), PackedInt32Array(59, 58, 57), PackedInt32Array(56, 58, 59), PackedInt32Array(62, 61, 60), PackedInt32Array(66, 69, 67), PackedInt32Array(67, 68, 63), PackedInt32Array(63, 68, 64), PackedInt32Array(64, 68, 65), PackedInt32Array(65, 68, 66), PackedInt32Array(69, 68, 67), PackedInt32Array(66, 68, 69), PackedInt32Array(73, 72, 70), PackedInt32Array(70, 72, 71), PackedInt32Array(77, 76, 74), PackedInt32Array(74, 76, 75), PackedInt32Array(79, 78, 80), PackedInt32Array(80, 78, 81), PackedInt32Array(83, 82, 84), PackedInt32Array(84, 82, 85), PackedInt32Array(88, 87, 86), PackedInt32Array(90, 89, 91), PackedInt32Array(91, 89, 92), PackedInt32Array(95, 94, 93), PackedInt32Array(97, 96, 98), PackedInt32Array(98, 96, 99), PackedInt32Array(103, 102, 100), PackedInt32Array(100, 102, 101), PackedInt32Array(106, 105, 104), PackedInt32Array(108, 107, 109), PackedInt32Array(109, 107, 110), PackedInt32Array(110, 107, 111), PackedInt32Array(114, 113, 112), PackedInt32Array(116, 115, 117), PackedInt32Array(117, 115, 118), PackedInt32Array(120, 119, 121), PackedInt32Array(121, 119, 122), PackedInt32Array(126, 125, 123), PackedInt32Array(123, 125, 124), PackedInt32Array(130, 129, 127), PackedInt32Array(127, 129, 128), PackedInt32Array(134, 133, 131), PackedInt32Array(131, 133, 132)]

[sub_resource type="Environment" id="Environment_nfxsl"]
background_mode = 1
ambient_light_source = 2
ambient_light_color = Color(0.385493, 0.385492, 0.385492, 1)
glow_bloom = 1.0
fog_light_color = Color(0, 0, 0, 1)
fog_density = 0.07
volumetric_fog_density = 0.1228
volumetric_fog_albedo = Color(0, 0, 0, 1)
volumetric_fog_emission_energy = 0.0

[node name="Level4" type="Node3D"]
script = SubResource("GDScript_ur7ug")
barrel = ExtResource("3_hbe0q")

[node name="Timer" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[node name="Objective" parent="." instance=ExtResource("6_pj5qa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -45, 5, 27)

[node name="ObjectiveItem" parent="Objective" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 213, -38, -60)

[node name="Player" parent="." instance=ExtResource("2_wpjg1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -48.0502, 3, 26.8419)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_pq4er")

[node name="level4" parent="NavigationRegion3D" instance=ExtResource("1_mp2pk")]

[node name="SpawnLocations" type="Node" parent="."]

[node name="Marker3D" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -57)

[node name="Marker3D2" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -57)

[node name="Marker3D3" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -57)

[node name="Marker3D4" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -55)

[node name="Marker3D5" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -55)

[node name="Marker3D6" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -55)

[node name="Marker3D7" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -53)

[node name="Marker3D8" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -53)

[node name="Marker3D9" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -53)

[node name="Marker3D10" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -51)

[node name="Marker3D11" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -51)

[node name="Marker3D12" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -51)

[node name="Marker3D13" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -49)

[node name="Marker3D14" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -49)

[node name="Marker3D15" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -49)

[node name="Marker3D16" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -47)

[node name="Marker3D17" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -47)

[node name="Marker3D18" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -47)

[node name="Marker3D19" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -45)

[node name="Marker3D20" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -45)

[node name="Marker3D21" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -45)

[node name="Marker3D22" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87, 17, -43)

[node name="Marker3D23" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 85, 17, -43)

[node name="Marker3D24" type="Marker3D" parent="SpawnLocations"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 83, 17, -43)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.965926, -0.25, -0.0669872, 0, -0.258819, 0.965926, -0.258819, -0.933013, -0.25, -16.8578, 10.7307, 50.9043)
light_color = Color(0.533333, 0.533333, 0.533333, 1)
shadow_enabled = true
sky_mode = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_nfxsl")

[node name="ExplosiveBarrelPile" parent="." instance=ExtResource("4_eyiea")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 1, 3)

[node name="ExplosiveBarrelPile2" parent="." instance=ExtResource("4_eyiea")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.19812, 1, 10.2377)

[node name="ExplosiveBarrelPile3" parent="." instance=ExtResource("4_eyiea")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.859592, 1, -10.4489)

[node name="ExplosiveBarrel" parent="." instance=ExtResource("3_hbe0q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.50626, 0.999756, -16.0535)

[node name="ExplosiveBarrel2" parent="." instance=ExtResource("3_hbe0q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.50626, 0.999756, -17.0535)

[node name="ExplosiveBarrel3" parent="." instance=ExtResource("3_hbe0q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.50626, 0.999756, -18.0535)

[node name="ExplosiveBarrel4" parent="." instance=ExtResource("3_hbe0q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.50626, 2.99976, -17.0535)

[node name="ExplosiveBarrel5" parent="." instance=ExtResource("3_hbe0q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 33.9654, 1, -11.1711)

[node name="Bomber" parent="." instance=ExtResource("5_clcqa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 33, 2, -29)

[node name="Bomber2" parent="." instance=ExtResource("5_clcqa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -37, 1, 27)

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]

[editable path="Objective"]
